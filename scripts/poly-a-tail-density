#!/usr/bin/env Rscript

sys = modules::import('klmr/sys')

sys$run({
    args = sys$cmd$parse(arg('taginfo', 'input taginfo file'))

    io = modules::import('ebi-predocs/ebits/io')
    modules::import_package('dplyr', attach = TRUE)

    taginfo = io$read_table(args$taginfo, header = TRUE)

    modules::import_package('ggplot2', attach = TRUE)

    #+ pA-density
    ggplot(taginfo) +
        aes(x = palen, y = ..density.., color = paste(type, treatment)) +
        geom_freqpoly(binwidth = 6) +
        scale_x_continuous(limits = c(0, 85), expand = c(0, 0)) +
        labs(x = 'poly-A length', y = 'Density of reads', color = 'Condition')
})

# vim: ft=r
